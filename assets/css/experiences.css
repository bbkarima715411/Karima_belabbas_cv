/* =========================================================
   EXPÉRIENCES — Timelines HORIZONTALES + barre de rechargement
   ========================================================= */
.wrap {
  max-width: 1200px;
  margin: 0 auto;
}
h1 {
  color: var(--accent);
  margin: 0 0 0.6rem;
  text-align: center;
  font-size: clamp(2.2rem, 6vw, 3rem);
  line-height: 1.2;
  position: relative;
  padding-bottom: 0.3rem;
}
/* souligné animé sous le H1 (apparition quand .reveal devient .is-in) */
h1.reveal::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -2px;
  transform: translateX(-50%);
  height: 3px;
  width: 0;
  background: var(--accent);
  border-radius: 999px;
  transition: width 600ms ease;
}
h1.reveal.is-in::after {
  width: 110px;
}
.htl-section {
  margin: 1rem 0 1.5rem;
}
.htl-section h2 {
  color: var(--accent);
  margin: 0 0 0.8rem;
  text-align: left;
  font-size: clamp(1.6rem, 4.5vw, 2.2rem);
  line-height: 1.25;
  position: relative;
  padding-bottom: 0.35rem;
}
/* souligné animé sous H2, déclenché quand la section .htl-section (qui a .reveal) devient .is-in */
.htl-section.reveal.is-in h2::after {
  width: 70px;
}
.htl-section h2::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: -2px;
  transform: none;
  height: 3px;
  width: 0;
  background: var(--accent);
  border-radius: 999px;
  transition: width 600ms ease;
}

/* Conteneur timeline */
.htl {
  --rail: #dcdcdc;
  --fill: var(--accent);
  --fill-soft: color-mix(in oklab, var(--accent) 70%, white);
  --prog: 0%; /* progress dynamique (JS) */
  position: relative;
  padding-top: 9rem; /* place pour les titres au-dessus du rail */
  padding-bottom: 6rem; /* place pour les descriptions sous le rail */
}

/* Variante plus douce (formations) */
.htl[data-color="accent-soft"] {
  --fill: var(--fill-soft);
}

/* Rail et progression (barre de rechargement) */
.htl-track {
  position: relative;
  height: 10px;
  background: var(--rail);
  border-radius: 999px;
  overflow: hidden;
}
.htl-progress {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: var(--prog);
  background: var(--fill);
  border-radius: 999px;
  transition: width 2.2s ease; /* effet "rechargement" */
  will-change: width;
}
/* Pointeur lumineux qui suit la progression */
.htl-pointer {
  position: absolute;
  top: 50%;
  left: var(--prog);
  transform: translate(-50%, -50%);
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--fill);
  box-shadow: 0 0 0 6px color-mix(in oklab, var(--fill) 30%, transparent),
    0 0 20px color-mix(in oklab, var(--fill) 60%, transparent);
  transition: left 2.2s ease;
  pointer-events: none;
}

/* Items répartis horizontalement */
.htl-items {
  list-style: none;
  margin: 0;
  padding: 0;
  position: relative;
}
.htl-items li {
  position: absolute;
  top: -7rem; /* titres au-dessus de la barre */
  transform: translateX(-50%);
  width: clamp(160px, 18vw, 240px); /* largeur carte */
  text-align: center;
}
.htl-items li h3 {
  margin: 0.15rem 0 0.25rem;
  font-size: clamp(0.95rem, 2.6vw, 1.05rem);
  line-height: 1.2;
}
.htl-items li p {
  color: var(--muted);
  line-height: 1.4;
  font-size: 0.85rem;
  margin: 0;
}
/* pastille sous chaque item, sur le rail */
.htl-items li::after {
  content: "";
  position: absolute;
  left: 50%;
  top: calc(7rem + 10px); /* 10px = hauteur du rail */
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--fill);
  transform: translate(-50%, -50%);
}

/* État actif : item correspondant à la progression */
.htl-items li.is-active h3 {
  color: var(--fill);
}

/* Réduction d'espace spécifique au bloc Formations */
.htl-section + .htl-section {
  margin-top: 1rem;
}
.htl-section + .htl-section .htl {
  padding-top: 8rem;
  padding-bottom: 5rem;
}
.htl-section + .htl-section .htl-items li {
  top: -7rem;
}
.htl-section + .htl-section .htl-items li::after {
  top: calc(7rem + 10px);
}

/* Responsive : on augmente la hauteur verticale pour laisser respirer */
@media (max-width: 820px) {
  .htl {
    padding-top: 5rem;
    padding-bottom: 3rem;
  }
  .htl-items li {
    width: clamp(140px, 44vw, 240px);
  }
}

/* Mode sombre : rail adouci */
body.dark .htl-track {
  background: #222;
}
